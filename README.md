# GENERAL

## Theme
This section contains general information about ASP.NET Core.

## Key Points
- ASP.NET Core is a cross-platform, open-source framework for building web apps and services.
- ASP.NET Core primarily provides server-side rendering. If you need to implement client-side rendering, you need to use SPA frameworks or libraries like Angular, React, or Vue.js.
- In general, we can put everything in a single project, but in real world projects, we usually use create separate project for each functionality
like one project for Models, one for DataAccess etc. The new projects would be of the type class. (N-tier Architecture)

# CREATING CRUD OPERATIONS

## Theme
In this section, we will create a simple ASP.NET Core (MVC) app with a SQL Server backend. The frontend will contain a simple page for showing categories and allowing the user to update or delete them. This will be a complete CRUD app with backend integration.

## Key Points

1. **Model, View, and Controller Naming**
   - We can change the name of the Models folder but not the Views and Controller folders.

2. **Auto-Generate Property in Model**
   - Press `props` and then `Tab` to auto-generate properties in a model in Visual Studio.

3. **Defining Primary Key in Model**
   - Use data annotations to explicitly define the primary key.
   - Write `[Key]` above the attribute you want to set as the primary key in your model.
   - If the attribute name is `Id`, Entity Framework Core (EFC) will automatically assume it is the primary key, so explicit declaration is not necessary.
   - Similarly, if you use `ModelNameId`, EFC will still treat it as a primary key.
   - It's best practice to explicitly write `[Key]` for clarity and future reference.

4. **Required Attributes in Model**
   - Use `[Required]` with any attribute to ensure that the SQL generated for this model will have non-null columns in the table.

5. **NuGet Package Versioning**
   - When installing packages from the NuGet Package Manager, ensure all packages are of the same version. For example, if you are installing `Microsoft.EntityFrameworkCore` version 8.0.0, install other related packages of the same version.

6. **Entity Framework Core Tools**
   - The `Microsoft.EntityFrameworkCore.Tools` package enables commands used for migration.

7. **Edit Project File**
   - Right-click on the project and select `Edit Project File` to view and edit dependencies manually.

8. **SQL Server Connection**
   - Define the SQL Server connection in the `appsettings.json` file by creating a new key with the name `ConnectionStrings`.
   - Example without authentication:
     ```json
     "ConnectionStrings": {
       "DefaultConnection": "Server=(server name here);Database=(Database name here);Trusted_Connection=True;TrustServerCertificate=True;"
     }
     ```
   - Example with authentication:
     ```json
     "ConnectionStrings": {
       "DefaultConnection": "Server=10.170.192.52;Database=Medcare_DB_Dev;User ID=your_username;Password=your_password;TrustServerCertificate=True"
     }
     ```

9. **Basic Configuration of Entity Framework**
   - Create an `ApplicationDbContext` class which implements `DbContext`.

10. **Generate Constructor**
    - Press `ctor` and hit `Enter` to generate a constructor for the current class.

11. **Register Services**
    - Register services in the `Program.cs` file.

12. **Create DbSet Properties**
    - To create a table, add a property of type `DbSet` in your `ApplicationDbContext`.

13. **Create Migrations**
    - Use the command `add-migration MigrationName` to create a migration file. This file will contain code generated by Entity Framework to create a table in the SQL Server.

14. **Update Database**
    - Use the `update-database` command to apply new migrations to the database.

15. **Run Migration Commands**
    - Run commands like `add-migration` and `update-database` in the Package Manager Console.

16. **CRUD Process**
    - The basic process is: create model -> add migration -> update database.

17. **Default Controller Behavior**
    - When creating a controller (e.g., `CategoryController`), the default action is `Index()`, and it will be searched in two locations: `/Views/Category/Index.cshtml` and `/Views/Shared/Index.cshtml` (for partial views).
    - The default route would be `serverurl/category/Index`, where `/Index` is optional.

18. **Hot Reload in .NET Core**
    - In the latest .NET Core, enabling hot reload means you don't need to update the browser when changing the view, but this does not apply to the controller.

19. **Input Validation**
    - Perform input validation using a combination of Model, View, and Controller both on the server side and partially on the client side.

20. **TempData**
    - `TempData` is available before the rerender (before the refresh).

21. **Toast Messages**
    - Use partial views to display toast messages across the app.

22. **Ntier Architecture**
    - Usually in the real world projects, we divide the project into the smaller projects being called by one of the project with a solution. To
    - Acheive this architect, we usually create a DataAccess project, Models project and Utility project etc. 
    - Once, we create a DataAccess project, we add all the files related to db in it. So, all the operations like migration and the database-update are done on this project.
    - If you delete migrations folder, you need to rewrite the migrations and update database commands.

## Link to Tutorial
[Watch the Tutorial](https://youtu.be/AopeJjkcRvU?si=wsuyeQ4GAw4CuyHM)
